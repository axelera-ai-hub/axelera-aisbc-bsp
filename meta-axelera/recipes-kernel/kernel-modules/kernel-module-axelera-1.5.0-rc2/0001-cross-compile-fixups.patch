From 4f4dc8d1c7debe17a29a363160db10840c5141f3 Mon Sep 17 00:00:00 2001
From: Michael Trimarchi <michael@amarulasolutions.com>
Date: Wed, 22 Oct 2025 12:20:06 +0200
Subject: [PATCH] os: driver: Add module compilation

Signed-off-by: Michael Trimarchi <michael@amarulasolutions.com>
---
 os/driver/Makefile | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/os/driver/Makefile b/os/driver/Makefile
index 7c319fe..a356956 100644
--- a/os/driver/Makefile
+++ b/os/driver/Makefile
@@ -1,9 +1,18 @@
 
 # Copyright (c) 2025 Axelera AI. All rights reserved.
 
+ARCH ?= arm64
+
 obj-m += dmabuf-triton-exporter.o
 obj-m += dmabuf-triton-importer.o
 obj-m += axl-pcie-reset.o
 obj-m += metis.o
 
 metis-y += metis-core.o metis-edma.o metis-edma-debugfs.o metis-hdma.o metis-hdma-debugfs.o metis-ioctl.o
+
+
+all:
+	make ARCH=$(ARCH) -C $(KERNEL_PATH) M=$(PWD) modules
+
+clean:
+	make ARCH=$(ARCH) -C $(KERNEL_PATH) M=$(PWD) clean
-- 
2.43.0

