From 5c7c022717b4332538150d44cf56fd8edbaba304 Mon Sep 17 00:00:00 2001
From: Shawn Lin <shawn.lin@rock-chips.com>
Date: Fri, 7 Apr 2023 17:17:21 +0800
Subject: [PATCH] arm64: dts: rockchip: rk3588: Fix PCIe node

Signed-off-by: Shawn Lin <shawn.lin@rock-chips.com>
Change-Id: Iac3f0af7d8911cf188cc29788b4777a446536362
---
 arch/arm64/boot/dts/rockchip/rk3588.dtsi | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3588.dtsi b/arch/arm64/boot/dts/rockchip/rk3588.dtsi
index ad414c61fd38..45d8ae830020 100644
--- a/arch/arm64/boot/dts/rockchip/rk3588.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3588.dtsi
@@ -601,13 +601,13 @@ pcie3x4: pcie@fe150000 {
 		phys = <&pcie30phy>;
 		phy-names = "pcie-phy";
 		power-domains = <&power RK3588_PD_PCIE>;
-		ranges = <0x00000800 0x0 0xf0000000 0x0 0xf0000000 0x0 0x100000
-			  0x81000000 0x0 0xf0100000 0x0 0xf0100000 0x0 0x100000
+		ranges = <0x81000000 0x0 0xf0100000 0x0 0xf0100000 0x0 0x100000
 			  0x82000000 0x0 0xf0200000 0x0 0xf0200000 0x0 0xe00000
 			  0xc3000000 0x9 0x00000000 0x9 0x00000000 0x0 0x40000000>;
 		reg = <0x0 0xfe150000 0x0 0x10000>,
-		      <0xa 0x40000000 0x0 0x400000>;
-		reg-names = "pcie-apb", "pcie-dbi";
+		      <0xa 0x40000000 0x0 0x400000>,
+		      <0x0 0xf0000000 0x0 0x100000>;
+		reg-names = "pcie-apb", "pcie-dbi", "config";
 		resets = <&cru SRST_PCIE0_POWER_UP>, <&cru SRST_P_PCIE0>;
 		reset-names = "pcie", "periph";
 		rockchip,pipe-grf = <&php_grf>;
@@ -656,13 +656,13 @@ pcie3x2: pcie@fe160000 {
 		phys = <&pcie30phy>;
 		phy-names = "pcie-phy";
 		power-domains = <&power RK3588_PD_PCIE>;
-		ranges = <0x00000800 0x0 0xf1000000 0x0 0xf1000000 0x0 0x100000
-			  0x81000000 0x0 0xf1100000 0x0 0xf1100000 0x0 0x100000
+		ranges = <0x81000000 0x0 0xf1100000 0x0 0xf1100000 0x0 0x100000
 			  0x82000000 0x0 0xf1200000 0x0 0xf1200000 0x0 0xe00000
 			  0xc3000000 0x9 0x40000000 0x9 0x40000000 0x0 0x40000000>;
 		reg = <0x0 0xfe160000 0x0 0x10000>,
-		      <0xa 0x40400000 0x0 0x400000>;
-		reg-names = "pcie-apb", "pcie-dbi";
+		      <0xa 0x40400000 0x0 0x400000>,
+		      <0x0 0xf1000000 0x0 0x100000>;
+		reg-names = "pcie-apb", "pcie-dbi", "config";
 		resets = <&cru SRST_PCIE1_POWER_UP>, <&cru SRST_P_PCIE1>;
 		reset-names = "pcie", "periph";
 		rockchip,pipe-grf = <&php_grf>;
@@ -710,13 +710,13 @@ pcie2x1l0: pcie@fe170000 {
 		num-lanes = <1>;
 		phys = <&combphy1_ps PHY_TYPE_PCIE>;
 		phy-names = "pcie-phy";
-		ranges = <0x00000800 0x0 0xf2000000 0x0 0xf2000000 0x0 0x100000
-			  0x81000000 0x0 0xf2100000 0x0 0xf2100000 0x0 0x100000
+		ranges = <0x81000000 0x0 0xf2100000 0x0 0xf2100000 0x0 0x100000
 			  0x82000000 0x0 0xf2200000 0x0 0xf2200000 0x0 0xe00000
 			  0xc3000000 0x9 0x80000000 0x9 0x80000000 0x0 0x40000000>;
 		reg = <0x0 0xfe170000 0x0 0x10000>,
-		      <0xa 0x40800000 0x0 0x400000>;
-		reg-names = "pcie-apb", "pcie-dbi";
+		      <0xa 0x40800000 0x0 0x400000>,
+		      <0x0 0xf2000000 0x0 0x100000>;
+		reg-names = "pcie-apb", "pcie-dbi", "config";
 		resets = <&cru SRST_PCIE2_POWER_UP>, <&cru SRST_P_PCIE2>;
 		reset-names = "pcie", "periph";
 		rockchip,pipe-grf = <&php_grf>;
-- 
2.43.0

