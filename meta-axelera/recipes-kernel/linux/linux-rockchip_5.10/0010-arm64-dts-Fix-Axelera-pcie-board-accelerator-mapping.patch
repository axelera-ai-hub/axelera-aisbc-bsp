From 8961787396d09edf561a29dffdfd9f40b3e356c2 Mon Sep 17 00:00:00 2001
From: Michael Trimarchi <michael@amarulasolutions.com>
Date: Mon, 18 Nov 2024 19:13:49 +0000
Subject: [PATCH] arm64: dts: Fix Axelera pcie board accelerator mapping

Signed-off-by: Michael Trimarchi <michael@amarulasolutions.com>
---
 .../arm64/boot/dts/rockchip/rk3588-firefly-itx-3588j.dtsi | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/rk3588-firefly-itx-3588j.dtsi b/arch/arm64/boot/dts/rockchip/rk3588-firefly-itx-3588j.dtsi
index 53791b55ee3b..be1224451eec 100644
--- a/arch/arm64/boot/dts/rockchip/rk3588-firefly-itx-3588j.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3588-firefly-itx-3588j.dtsi
@@ -250,6 +250,14 @@ &pcie30phy {
 };
 
 &pcie3x4 {
+	/* Add Axelera specific mapping */
+	ranges = <0x81000000 0x0 0xf0100000 0x0 0xf0100000 0x0 0x100000
+		  0x82000000 0x0 0x40000000 0x9 0x00000000 0x0 0x20000000
+		  0xc3000000 0x0 0x60000000 0x9 0x20000000 0x0 0x20000000>;
+	reg = <0x0 0xfe150000 0x0 0x10000>,
+	      <0xa 0x40000000 0x0 0x400000>,
+	      <0x0 0xf0000000 0x0 0x00100000>;
+
 	reset-gpios = <&gpio4 RK_PB6 GPIO_ACTIVE_HIGH>;
 	vpcie3v3-supply = <&vcc3v3_pcie30>;
 	status = "okay";
-- 
2.39.2

